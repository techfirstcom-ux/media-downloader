<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TECHFIRST — Select Quality</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap');
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
    body, html { height: 100%; background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); color: #e0e0e0;
      padding: 1.5rem 1rem; display: flex; justify-content: center; align-items: center; }
    main { background: rgba(30, 30, 30, 0.9); border-radius: 16px; padding: 2.5rem 3rem; max-width: 520px;
      width: 100%; box-shadow: 0 0 20px #0ff; text-align: center; user-select: none; }
    header img { max-width: 140px; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 0 15px #00fff7; }
    header h1 { font-weight: 700; font-size: 2.5rem; margin-bottom: 0.4rem; color: #00fff7; }
    header p { color: #a0f0f7; margin-bottom: 1rem; font-size: 1rem; }
    select { width: 100%; padding: 0.8rem 1.2rem; font-size: 1rem; border-radius: 12px; border: none;
      background: #222; color: #eee; margin-bottom: 2rem; transition: background-color 0.3s ease; }
    select:focus { outline: none; background-color: #004d55; box-shadow: 0 0 8px #00fff7; color: #e0f7f7; }
    button { padding: 1rem 2.2rem; border-radius: 14px; border: none; font-weight: 700; font-size: 1.1rem;
      letter-spacing: 1.5px; cursor: pointer; transition: background 0.3s ease; margin: 0 0.7rem 0 0; user-select: none; }
    button.confirm { background: #00fff7; color: #101010; }
    button.confirm:hover { background: #00ccc0; }
    footer { margin-top: 2rem; color: #555; font-size: 0.8rem; user-select: none; }
    @media (max-width: 480px) { main { padding: 2rem 1.5rem; border-radius: 12px; } header h1 { font-size: 2rem; }
      button { width: 100%; margin: 0 0 1rem 0; } }
  </style>
</head>
<body>
  <main>
    <header>
      {% if thumbnail %}<img src="{{ thumbnail }}" alt="Thumbnail" />{% endif %}
      <h1>{{ title }}</h1>
      {% if duration %}<p>Duration: {{ (duration // 60) }}m {{ (duration % 60) }}s</p>{% endif %}
      {% if views %}<p>Views: {{ "{:,}".format(views) }}</p>{% endif %}
      {% if likes %}<p>Likes: {{ "{:,}".format(likes) }}</p>{% endif %}
      {% if channel %}<p>Channel: {{ channel }} ({{ subscribers }})</p>{% endif %}
    </header>

    <form method="POST" action="{{ url_for('download') }}">
      <input type="hidden" name="url" value="{{ url }}" />
      <input type="hidden" name="mode" value="{{ mode }}" />
      <input type="hidden" name="platform" value="{{ platform }}" />

      {% if formats %}
      <select name="format_id" id="format" required>
        {% for f in formats %}
          <option value="{{ f.format_id }}">{{ f.quality }} — {{ f.size_mb }}</option>
        {% endfor %}
      </select>
      {% endif %}

      {% if audio_formats %}
      <select name="audio_id" id="audio">
        {% for a in audio_formats %}
          <option value="{{ a.format_id }}">{{ a.quality }} — {{ a.size_mb }}</option>
        {% endfor %}
      </select>
      {% endif %}

      <div style="display:flex; justify-content:center; flex-wrap: wrap;">
        <button type="submit" class="confirm">Confirm Download</button>
      </div>
    </form>
    <footer>Made by A. S. DEVNESH</footer>
  </main>
</body>
</html>

